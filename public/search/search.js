function e(e){return`<div class="heading" id="heading">${(e=e||{title:"",items:[]}).title}</div><div class="results" id="results" role="list" aria-labelledby="heading" tabindex="-1">`+e.items.map(t).join("")+"</div>"}let t=e=>'<div class="listitem" role="listitem">'+i(e)+`<a class="link" href="${e.url}">`+(e.hierarchy[e.type]&&"lvl1"===e.type?l({className:"link-title",item:e,attribute:"hierarchy.lvl1"}):"")+(!e.hierarchy[e.type]||"lvl2"!==e.type&&"lvl3"!==e.type&&"lvl4"!==e.type&&"lvl5"!==e.type&&"lvl6"!==e.type?"":l({className:"link-title",item:e,attribute:`hierarchy.${e.type}`}))+("content"===e.type?l({className:"link-title",item:e,attribute:"content"}):"")+'</a><p class="link-description">'+(e.hierarchy[e.type]&&"lvl1"===e.type&&e.content?l({className:"link-description-path",item:e,attribute:"content"}):"")+(!e.hierarchy[e.type]||"lvl2"!==e.type&&"lvl3"!==e.type&&"lvl4"!==e.type&&"lvl5"!==e.type&&"lvl6"!==e.type?"":l({className:"link-description-level",item:e,attribute:"hierarchy.lvl1"}))+("content"===e.type?l({className:"link-description-path",item:e,attribute:"hierarchy.lvl1"}):"")+"</p></div>",l=e=>{let{className:t="",item:l}=e;return`<span class="${t}">${r(l,`_snippetResult.${e.attribute}.value`)||r(l,e.attribute)}</span>`};function r(e,t){return t.split(".").reduce(((e,t)=>e?.[t]?e[t]:null),e)}let i=e=>"lvl1"===e.type?'<svg class="search-result-icon" width="20" height="20" viewBox="0 0 20 20"><path d="M17 6v12c0 .52-.2 1-1 1H4c-.7 0-1-.33-1-1V2c0-.55.42-1 1-1h8l5 5zM14 8h-3.13c-.51 0-.87-.34-.87-.87V4" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></svg>':"content"===e.type?a():n(),n=()=>'<svg class="search-result-icon" width="20" height="20" viewBox="0 0 20 20"><path d="M13 13h4-4V8H7v5h6v4-4H7V8H3h4V3v5h6V3v5h4-4v5zm-6 0v4-4H3h4z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"/></svg>',a=()=>'<svg class="search-result-icon" width="20" height="20" viewBox="0 0 20 20"><path d="M17 5H3h14zm0 5H3h14zm0 5H3h14z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></svg>',s=/(<mark>|<\/mark>)/g,h=RegExp(s.source);function c(e){let t,l,r,i,n,a=e;if(!a.__docsearch_parent&&!e._highlightResult)return e.hierarchy.lvl0;let c=((a.__docsearch_parent?null===(t=a.__docsearch_parent)||void 0===t||null===(l=t._highlightResult)||void 0===l||null===(r=l.hierarchy)||void 0===r?void 0:r.lvl0:null===(i=e._highlightResult)||void 0===i||null===(n=i.hierarchy)||void 0===n?void 0:n.lvl0)||{}).value;return c&&h.test(c)?c.replace(s,""):c}let o,{stringify:u}=JSON,{at:d,indexOf:p,push:v,splice:y}=Array.prototype,g=Object.create(null),m={url:"",method:"GET",headers:{},body:null,referrer:"about:client",referrerPolicy:"",mode:"cors",credentials:"same-origin",cache:"default",redirect:"follow",integrity:"",keepalive:!1},f=Object.create(null);class b extends Request{#e=null;#t=null;#l=null;constructor(e){let t=((e,t)=>{for(o in e=null==e?g:"object"==typeof e?e:{url:e},m)t[o]=o in e?e[o]:m[o];return t})(e,{}),l=u(t);if(l in f)return f[l];let r=new AbortController;t.signal=r.signal,f[l]=super(t.url,t),this.#e=r,this.#t=new Request(t.url,t)}abort(){this.#e.abort()}async fetch(){if(!this.#l){this.#t.signal.aborted&&(this.#e=new AbortController,this.#t=new Request(this.#t,{signal:this.#e.signal}));try{this.#l=await fetch(this.#t)}catch{return null}}return this.#l.clone()}async text(){try{let e=await this.fetch();return await e.text()}catch(e){return""}}get done(){return null!==this.#l}}class w extends Set{length;#r=null;add(e){if(e!==this[this.length-1]){let t=p.call(this,e);t>-1&&y.call(this,t,1),v.call(this,e)}return this}at(e){return d.call(this,e)}get size(){return this.length||0}abort(){let e=this.at(-1),t=this.#r;t&&t!==e&&!t.done&&t.abort()}async text(){return this.#r=this.at(-1),await this.#r.text()}async json(){try{let e=await this.text();return JSON.parse(e)}catch{return null}}}let k=new Range;k.selectNodeContents(document.createElement("template"));let x=k.createContextualFragment.bind(k),N=(_={},e=>(...t)=>{let l=JSON.stringify(t);return l in _||(_[l]=e(...t)),_[l]});var _;let q=e=>{let t=new w,l=`https://${e.appId}-dsn.algolia.net/1/indexes/*/queries?${new URLSearchParams({"x-algolia-api-key":e.apiKey,"x-algolia-application-id":e.appId})}`,r=String(new URLSearchParams({attributesToRetrieve:'["hierarchy.lvl0","hierarchy.lvl1","hierarchy.lvl2","hierarchy.lvl3","hierarchy.lvl4","hierarchy.lvl5","hierarchy.lvl6","content","type","url"]',attributesToSnippet:'["hierarchy.lvl1:10","hierarchy.lvl2:10","hierarchy.lvl3:10","hierarchy.lvl4:10","hierarchy.lvl5:10","hierarchy.lvl6:10","content:10"]',snippetEllipsisText:"â€¦",highlightPreTag:"<mark>",highlightPostTag:"</mark>",hitsPerPage:"20"}));return N((async i=>{if(!(i=null==i?"":String(i).trim()))return null;t.add(new b({url:l,body:JSON.stringify({requests:[{query:i,indexName:e.indexName,params:r}]}),method:"POST",credentials:"omit"}));let n=(await t.json())?.results?.[0]?.hits||[],a=(s=e=>c(e),n.reduce(((e,t)=>{const l=s(t);return e.hasOwnProperty(l)||(e[l]=[]),e[l].length<5&&e[l].push(t),e}),{}));var s;let h=n.length?c(n[0]):"";return{title:h,items:a[h]||[]}}))};export{q as createSearch,x as html,e as results};