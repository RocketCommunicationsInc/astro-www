<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Super Secret Page</title>
		<style>
			body {
				font-family: system-ui, -apple-system, sans-serif;
				max-width: 800px;
				margin: 50px auto;
				padding: 20px;
				line-height: 1.6;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
			}
			.secret-box {
				background: rgba(255, 255, 255, 0.1);
				backdrop-filter: blur(10px);
				border: 2px solid rgba(255, 255, 255, 0.3);
				padding: 30px;
				border-radius: 12px;
				margin: 20px 0;
			}
			h1 {
				font-size: 3em;
				text-align: center;
				text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
			}
			button,
			a {
				padding: 10px 20px;
				margin: 5px;
				background: rgba(255, 255, 255, 0.2);
				color: white;
				border: 2px solid white;
				border-radius: 5px;
				cursor: pointer;
				text-decoration: none;
				display: inline-block;
			}
			button:hover,
			a:hover {
				background: rgba(255, 255, 255, 0.3);
			}
		</style>
	</head>
	<body>
		<h1>üïµÔ∏è Super Secret Page</h1>

		<div class="secret-box">
			<h2>üéâ You found the secret page!</h2>
			<p>
				This page is also protected by the edge function. Only authenticated
				users can access it.
			</p>
			<p>
				<strong>Secret Message:</strong> The answer to life, the universe, and
				everything is... 42! üöÄ
			</p>
		</div>

		<div class="secret-box">
			<h3>Edge Function Verification</h3>
			<p>‚úì Path: <code>/test-protected/secret.html</code></p>
			<p>‚úì Protected by: <code>auth-guard</code> edge function</p>
			<p>‚úì Cookie requirement: <code>firebase_session</code> must be present</p>
		</div>

		<a href="/test-protected/">‚Üê Back to Protected Index</a>
		<a href="/test-auth.html">Auth Test Page</a>
		<button onclick="logout()">Logout</button>

		<script type="module">
			window.logout = async function () {
				try {
					await fetch('/.netlify/functions/clear-auth-cookie', {
						method: 'POST',
						credentials: 'include',
					});
					alert('Logged out! Redirecting...');
					window.location.href = '/auth/login';
				} catch (error) {
					console.error('Logout error:', error);
				}
			};
		</script>
	</body>
</html>
