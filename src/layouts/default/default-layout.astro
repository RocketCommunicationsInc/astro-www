---
import type { Props } from '@astropub/doc'

import Document from '@astropub/doc'
import './default-layout.css'

import SourceCodeAccess from 'project:components/source-code-access/source-code-access.astro'
import globalData from 'project:data/global.json'
import SiteNavigation from 'project:components/site-navigation/site-navigation.astro'
import SiteFooter from 'project:components/site-footer/site-footer.astro'

export type { Props }

const description = Astro.props.description ? Astro.props.description : `The Astro Space UX Design System enables developers & designers to build rich space app experiences with established interaction patterns & best practices.`

const attrs = {
	url: Astro.url.href,
	...globalData.siteMeta,
	description,
	...Astro.props,
}

// Firebase config for client-side
const firebaseConfig = {
  apiKey: import.meta.env.PUBLIC_FIREBASE_API_KEY,
  authDomain: import.meta.env.PUBLIC_FIREBASE_AUTH_DOMAIN,
  projectId: import.meta.env.PUBLIC_FIREBASE_PROJECT_ID,
  appId: import.meta.env.PUBLIC_FIREBASE_APP_ID
}

---
<Document body-class="p-grid" {...attrs}>
	<slot slot="head" name="head" />
	<meta slot="head" name="theme-color" content="#101923" />
	<slot name="top" />
	<link slot="head" rel="sitemap" href="/sitemap-index.xml">
	<div class="x-menu">
		<SiteNavigation />
	</div>
	<div class="x-main">
		<slot />
	</div>
	<div class="x-foot">
		<SiteFooter />
	</div>
	<SourceCodeAccess />
</Document>

<!-- Set global Firebase config for client-side modules -->
<script define:vars={{ firebaseConfig }}>
  window.firebaseConfig = firebaseConfig
</script>

<script>
import './default-layout.client'
import 'project:components/color-sample/color-sample'
</script>