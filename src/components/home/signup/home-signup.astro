---
import type signup from 'project:data/home-signup.json'
import './home-signup.css'

import Control from './home-signup-control.astro'
import Submit from './home-signup-submit.astro'
import { For } from '@astropub/flow'

const { data } = Astro.props as typeof signup
---
<section class="p-signup" aria-label={data.heading.data}>
	<h3 class="p-signup-heading">{data.heading.data}</h3>
	<p class="p-signup-content">{data.summary.data}</p>
	<form class="p-signup-form" action={data.form.data.action.data} method={data.form.data.method.data} target="_blank">
		<For of={data.content.data}>{item => (
			<Control type={item.type.data} required={item.required.data} placeholder={item.placeholder.data} autocomplete={item.autocomplete.data} name={item.mcname.data}>{item.label.data}</Control>
		)}</For>
		<Submit>Submit</Submit>
		<For of={data.hidden.data}>{item => (
			<input type={item.type.data as any} name={item.name.data} value={item.value?.data} />
		)}</For>
	</form>
</section>