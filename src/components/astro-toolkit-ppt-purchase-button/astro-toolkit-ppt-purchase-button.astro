---
import './astro-toolkit-ppt-purchase-button.css'

const getPackageInfo = async () => {
	const data = await fetch('https://registry.npmjs.org/@astrouxds/astro-web-components/').then((response) => {
	return response.ok ? response.json() : null
}).catch((err) => console.log(err, 'an error occured'))
	return data
}
const packageJson = await getPackageInfo()
const downloadLink = 'https://registry.npmjs.org/@astrouxds/astro-web-components/-/astro-web-components-'

// handle all versions
const allVersions = Object.keys(packageJson.versions)
const pattern = /^[6-9]\d?\.\d+\.\d+$/
const filteredVersions = allVersions.filter((ver) => pattern.test(ver)).reverse()

if (filteredVersions.length < 1) return

let options = `<option value=''>--Select Version--</option>`

for (const version of filteredVersions) {
	options = options + `<option value=${version}>${version}</option>`
}
---
<div class="astro-toolkit-ppt">
 <button type="button" class="p-button">Click Here to Buy</button>
</div>
<script>
	import './astro-toolkit-ppt-purchase-button.ts'
</script>