---

import { When } from '@astropub/flow'
import './home-signup.css'

const currentPathname = Astro.url.pathname
const supportOrHomePath = (currentPathname === '/support/' || currentPathname === '/')
const homePath = (currentPathname === "/")
const homeSignUpIntro = "Sign up to learn more about what Astro has to offer and to stay up to date on events, releases, and news."
---
<script>
    import '../../layouts/docs/docs-layout.client.js'
</script>

<When {supportOrHomePath}>
    <section class="p-signup-support" class="support__email-signup">
        <div id="mc_embed_signup">
            <form action="https://rocketcom.us12.list-manage.com/subscribe/post" method="GET"
                id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank"
                novalidate="novalidate">
                <When {homePath}>
                    <h2 class="p-signup-heading">Sign Up</h2>
                    <p class="p-homeSignup">{homeSignUpIntro}</p>
                </When>
                <div id="mc_embed_signup_scroll" class="p-signup-form-control">
                    <div class="mc-field-layout">
                        <div class="mc-field-group" class="p-signup-content">
                            <label for="mce-EMAIL">Email Address*</label>
                            <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL"
                                placeholder="Enter Email Address" onkeyup=handleSubmit() aria-required="true">
                        </div>
                    </div>
                    <div class="mc-field-layout">
                        <div class="mc-field-group">
                            <label for="mce-FNAME">First Name</label>
                            <input type="text" value="" maxlength="50"
                                onkeyup="this.value=this.value.replace(/[^a-zA-Z]/g, '')" name="FNAME" id="mce-FNAME"
                                placeholder="Enter First Name">
                        </div>
                        <div class="mc-field-group">
                            <label for="mce-LNAME">Last Name</label>
                            <input type="text" value="" maxlength="50"
                                onkeyup="this.value=this.value.replace(/[^a-zA-Z]/g, '')" name="LNAME" id="mce-LNAME"
                                placeholder="Enter Last Name">
                        </div>
                    </div>
                    <div id="mce-responses" class="clear">
                    </div>
                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text"
                            name="b_f067e558ee805172850a87843_c1af406c10" tabindex="-1" value="">
                    </div>
                </div>
                <div><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"
                        class="submit-button" disabled="disabled"></div>
                <input type="hidden" name="id" value="c1af406c10" />
                <input type="hidden" name="u" value="f067e558ee805172850a87843" />
                <input type="hidden" name="b_f067e558ee805172850a87843_c1af406c10" />
            </form>
        </div>
        <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js">
        </script>
        <script type="text/javascript">
            function handleSubmit() {
                const button = document.getElementById('mc-embedded-subscribe')
                button.removeAttribute("disabled")
            }
        </script>
    </section>
</When>